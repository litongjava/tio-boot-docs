# 生成场景提示词

[[toc]]
本方案旨在实现从用户简单输入到专业动画视频生成的全自动转换，通过多阶段提示和跨平台协同，确保生成的视频不仅内容详实、专业且动画效果精美。下文将分步骤介绍整个流程，并附上生成视频文案和详细场景提示的提示词示例。

---

## 1. 用户问题（前端传递）

- **用户输入**  
  用户在前端界面提交一个简单的主题，例如：“已知 \( f(x)=x^2 \)，求解该函数的切线。”
- **作用**  
  用户的输入构成整个生成流程的基础，决定了视频讲解的主题。
- **数据传递**  
  前端将用户输入的数据发送到后端（Java 端）进行后续处理。

---

## 2. 问题讲解

- **作用**  
  在此环节中，需要对问题的解题步骤和相关知识点进行详细讲解，包括理论原理、关键公式以及应用场景，为后续生成视频文案打下基础。

### 提示词

```
Answer the question using the format below:
**Answer**:
{{correct_answer}}
**Explanation**:
{{explanation content}}

Output using the language of the user's message.
```

### 输入和输出

输入

```
已知函数f(x)=x^2,如何求解该函数的切线
```

输出

```
**Answer**:
切线方程为 \( y = 2a(x - a) + a^2 \)，其中 \( a \) 是切点的横坐标。
**Explanation**:
1. 首先，确定切点的横坐标 \( a \)。切点的坐标为 \( (a, f(a)) = (a, a^2) \)。
2. 计算函数 \( f(x) = x^2 \) 的导数，得到 \( f'(x) = 2x \)。
3. 在切点 \( x = a \) 处的导数值为 \( f'(a) = 2a \)，这就是切线的斜率。
4. 使用点斜式方程 \( y - y_1 = m(x - x_1) \)，代入切点 \( (a, a^2) \) 和斜率 \( 2a \)，得到切线方程：
   \[
   y - a^2 = 2a(x - a)
   \]
   化简后得到：
   \[
   y = 2a(x - a) + a^2
   \]
```

---

## 3. 视频文案生成（视频字幕）

- **目标**  
  基于用户提供的问题与解题步骤，由大模型生成一份详细的视频文案，也就是视频中的字幕。
- **内容要求**
  - 对主题中的每个关键点进行详细解释，补充相关背景知识和理论原理。
  - 包含引导性问题、总结性语句和过渡句，确保解说内容逻辑清晰、连贯流畅。
  - 如涉及数学公式，使用 LaTeX 格式标注，确保公式排版正确。
- **执行方式**  
  大模型在 Java 端调用时，根据设计好的提示词，将用户主题转化为详细的视频文案。
- **输出**  
  生成的视频文案将作为字幕嵌入最终视频中，帮助观众更好地理解讲解内容。

### 生成视频文案提示词

```plaintext
请根据以下用户提供的问题或者主题，生成一份详细的视频文案，该文案将作为视频的字幕。文案需要做到以下几点：
1. 对主题中的各个关键知识点进行详细解释，包括相关背景、理论原理、关键公式及应用场景。
2. 语言通俗易懂，同时保持专业性，逻辑清晰，确保观众能跟上讲解进度。
3. 文案中应包含引导性问题、总结性语句和过渡句，使整段解说连贯流畅。
4. 如涉及数学公式，请以 LaTeX 格式标注，确保公式排版正确。

请输出完整的视频文案文本。
```

### 输出

```
大家好，欢迎来到本期数学讲解视频。今天我们将一起探讨一个常见而又基础的问题：**如何求解函数 \( f(x) = x^2 \) 的切线方程**。在这个过程中，我们会详细讲解背景知识、理论原理、关键公式以及应用场景，帮助大家更好地理解这一知识点。

---

### 一、问题背景与概念介绍

在学习函数的过程中，切线是一个非常重要的概念。**切线**是指在某一点与曲线仅有一个公共点，并且在该点具有与曲线相同的瞬时斜率的直线。对于函数 \( f(x) = x^2 \) 而言，其图像是一条开口向上的抛物线，求某一点的切线不仅可以帮助我们了解函数在该点的变化趋势，还在物理、工程等领域有着广泛的应用，比如用来进行局部线性近似。

**引导问题**：你是否想过为什么切线在很多实际问题中都扮演着“局部近似”这一重要角色呢？

---

### 二、求解切线的基本步骤

接下来，我们将通过以下几个步骤来求解切线方程：

1. **确定切点**
   假设我们要求的切线在函数图像上的切点为 \( (a, f(a)) \)。
   因此，切点的坐标为：
   \[
   (a, a^2)
   \]

2. **求导与计算斜率**
   切线的斜率就是曲线在切点处的瞬时变化率，也就是函数的导数值。
   先计算函数 \( f(x) = x^2 \) 的导数：
   \[
   f'(x) = 2x
   \]
   当 \( x = a \) 时，导数为：
   \[
   f'(a) = 2a
   \]
   这 \( 2a \) 就是切线的斜率。

3. **利用点斜式构造切线方程**
   有了切点和斜率后，我们就可以利用点斜式方程来写出切线方程：
   \[
   y - y_1 = m(x - x_1)
   \]
   其中，\( (x_1, y_1) = (a, a^2) \) 且 \( m = 2a \)。代入后得到：
   \[
   y - a^2 = 2a(x - a)
   \]
   化简后，切线方程为：
   \[
   y = 2a(x - a) + a^2
   \]

**引导问题**：你是否能清晰地理解为何在切点处函数的导数 \( f'(a) \) 代表切线的斜率呢？

---

### 三、理论原理与数学公式解析

在以上步骤中，我们应用了以下数学原理和公式：

- **导数的定义**：
  导数描述了函数在某一点处的瞬时变化率，是极限思想在微积分中的体现。对于任意函数 \( f(x) \)，其导数定义为：
  \[
  f'(x) = \lim_{h \to 0} \frac{f(x+h) - f(x)}{h}
  \]
  对于 \( f(x)=x^2 \) 而言，通过求极限我们得到了 \( f'(x) = 2x \)。

- **点斜式方程**：
  已知直线经过点 \( (x_1, y_1) \) 且斜率为 \( m \) 时，直线方程可以写为：
  \[
  y - y_1 = m(x - x_1)
  \]

**应用场景**：
- 在物理中，切线可以表示物体瞬时的运动方向和速度。
- 在工程中，利用切线可以对非线性函数进行局部线性化，方便进行控制与优化。

**过渡句**：理解了这些理论后，我们就可以自信地面对更多复杂的函数求导与切线问题了。

---

### 四、总结与回顾

让我们回顾一下今天的内容：
- **确定切点**：假设切点为 \( (a, a^2) \)。
- **求导计算斜率**：函数 \( f(x)=x^2 \) 的导数 \( f'(x)=2x \) 在 \( x=a \) 处取值为 \( 2a \)。
- **构造切线方程**：利用点斜式得到
  \[
  y = 2a(x - a) + a^2
  \]

**总结性语句**：通过以上步骤，我们不仅求出了函数 \( f(x)=x^2 \) 在任一点 \( (a, a^2) \) 处的切线方程，而且掌握了利用导数求切线这一强有力的工具，这将为解决更复杂的问题打下坚实的基础。

**引导性问题**：在实际问题中，你认为切线方程还能帮助我们解决哪些类型的问题？欢迎在评论区分享你的见解！

---

感谢大家的观看，希望本期视频能够帮助你深入理解切线的概念和求解方法。如果你还有其他疑问或想了解更多相关知识，请继续关注我们的频道，我们下期再见！
```

---

## 4. 详细场景提示生成(大模型)

- **目标**  
  在视频文案的基础上，进一步生成一份详细的视觉场景提示，指导动画中各视觉元素的呈现。
- **内容要求**
  - **数学公式**：使用 LaTeX 格式描述所有涉及的数学公式，确保公式在动画中能正确显示。
  - **场景布局**：详细描述动画背景、图形结构、三维坐标轴等构图元素。
  - **相机运动**：指定相机的运动轨迹、旋转角度、缩放比例和平移方向，以及各个动画片段的时间参数。
  - **颜色和动画效果**：明确各个对象的颜色、透明度、过渡效果（如 FadeIn、Create、ReplacementTransform 等）。
- **执行方式**  
  大模型在接收到视频文案后，通过设计好的提示词生成详细场景提示，形成一个完整的视觉规划蓝图。
- **输出**  
  详细场景提示将为后续生成 Manim 代码提供充分依据，确保动画效果符合预期。

### 提示词

```
请基于文案，生成一份详细的视觉场景提示。该提示将用于生成 Manim 动画代码，要求包含如下内容：
1. 用 LaTeX 格式描述所有涉及的数学公式，并确保公式正确排版。
2. 描述各个动画场景的布局，如背景（例如星空、宇宙、渐变、纯色）、二维坐标轴、三维坐标轴、图形结构、函数图像等。
3. 指定相机的运动参数（如旋转角度、缩放比例、平移方向和时间长度）。
4. 详细说明各个视觉效果，如颜色配置、动画过渡（例如 FadeIn、Create、ReplacementTransform 等）和文本（标题、字幕）效果。
5. 提供足够的细节，以便后续生成的代码能够精确还原预期的视觉效果。
6. 请使用用户的消息语言作为输出语言.
请输出完整的详细场景提示文本。

下面是一个场景提示文本实例:
## 如何求解函数 \( f(x) = x^2 \) 的切线方程

### 【场景一：欢迎介绍与星空背景】

- **背景设计与整体氛围**
  - 背景采用覆盖整个画面、深蓝色调的矩形，并在其上通过随机分布的小白点构成星空，这些星星以正弦波变化实现轻微闪烁，营造出神秘且高科技的视觉氛围。
  - 右上角显示场景编号“01”，用于标识当前场景。

- **主要内容**
  - 屏幕上方呈现大标题：“大家好，欢迎来到本期数学讲解视频”，文字颜色为纯白，采用渐显（FadeIn）动画效果。
  - 标题下方依次出现副标题，由三部分组成：
    - 文本：“如何求解函数”
    - 数学公式：\(f(x)=x^2\)（使用 LaTeX 渲染）
    - 文本：“的切线方程”
  - 副标题通过书写（Write）或替换转换（ReplacementTransform）的动画效果显现，并伴有短暂延时，确保观众能够逐步捕捉信息。

- **相机与过渡效果**
  - 标题与副标题出现后，相机以轻微前移（约 0.2 个单位向外移动）带来视觉引导感。
  - 动画整体节奏较为平缓，每个部分之间保留短暂停顿，使星空闪烁与文本效果相互衬托。

---

### 【场景二：切线概念与问题背景介绍】

- **背景与布局**
  - 背景换为统一填充的浅灰色，使页面内容更突出。
  - 右上角同样显示场景编号“02”。

- **内容呈现**
  - 左侧区域通过文字详细说明：“切线是曲线在某一点的瞬时方向，在函数 \(f(x)=x^2\) 中，切线反映了曲线在该点的斜率变化。”
  - 右侧区域构建二维坐标系，设定 x 轴与 y 轴范围，并绘制函数 \(f(x)=x^2\) 的抛物线图。
  - 在抛物线上，选取切点 \((a, a^2)\)（代码中取 \(a=1\)，即点 (1,1)），用红色圆点标出，并通过动态缩放（基于正弦波的脉动）增加视觉动感。

- **动画与相机运动**
  - 坐标轴和抛物线均采用逐步绘制（Create）效果展现；文字说明则以渐显（FadeIn）效果依次出现。
  - 整个镜头保持平稳，重点突出数学图形与文字信息的并列展示。

---

### 【场景三：切线求解步骤展示】

- **背景与分区设计**
  - 依然采用浅灰背景，适当加入辅助网格（隐约显示）以辅助理解数学推导。
  - 屏幕被分为左右两部分：左侧专注数学推导步骤，右侧展示图形示意。
  - 右上角同样显示场景编号“03”。

- **推导步骤内容**
  - **步骤1**：确定切点 \((a, a^2)\)
  - **步骤2**：计算导数并求切点处斜率，写出 \(f'(x)=2x,\quad f'(a)=2a\)
  - **步骤3**：写出切线的初始表达式：\(y - a^2 = 2a(x - a)\)
  - **步骤4**：整理得最终切线方程：\(y = 2a(x - a) + a^2\)
  - 每一步均以 LaTeX 公式形式呈现，确保数学表达清晰规范。

- **右侧图形展示**
  - 绘制与前一场景类似的坐标系，并重新绘制 \(f(x)=x^2\) 的抛物线。
  - 用红色圆点标出切点，同时计算出一条斜率为 \(2\) 的直线（通过归一化方向向量 [1,2,0] 得到）并用橙色绘制，直线延伸一定长度以清晰展示切线效果。

- **动画效果与相机调整**
  - 数学公式依次通过写入（Write）或替换动画（ReplacementTransform）呈现，每个步骤之间留有短暂停顿；同时，右侧图形也以 Create 效果逐步出现。
  - 镜头在展示过程中可能进行轻微平移或缩放，以确保左侧推导步骤与右侧图形均在焦点范围内。

---

### 【场景四：理论原理与数学公式解析】

- **背景与视觉分区**
  - 背景改为带有几何纹理的淡灰色，强调数学的严谨性。
  - 屏幕上部分和下部分分别展示不同的数学公式，右侧可辅以简单箭头或图示说明公式之间的联系。
  - 右上角同样显示场景编号“04”。

- **主要数学内容**
  - 上半部分显示导数的定义公式：
    \[
    f'(x)=\lim_{h \to 0}\frac{f(x+h)-f(x)}{h}
    \]
  - 下半部分展示点斜式直线方程：
    \[
    y - y_1 = m(x - x_1)
    \]
  - 两公式之间用一支醒目的箭头连接，直观展示从理论推导到具体应用的过程。

- **动画与相机细节**
  - 公式均采用 FadeIn 渐显效果依次出现，重点部分可以用高亮（如黄色或橙色）进行强调。
  - 开场时，镜头可做短暂旋转（约 10°）后平稳移动到公式区域，确保视觉焦点集中于数学公式的推导过程。

---

### 【场景五：总结与回顾】

- **背景与布局**
  - 背景恢复为深蓝或黑色，并加入柔和渐变或光晕效果，营造出总结时的庄重氛围。
  - 右上角依旧显示场景编号“05”。

- **回顾内容**
  - 屏幕上方大字显示“总结”，文字采用金色调，突出重点。
  - 随后依次列出三个核心公式：
    - 切点：\((a, a^2)\)
    - 导数：\(f'(x)=2x\)
    - 切线方程：\(y=2a(x-a)+a^2\)
  - 底部展示引导性提问：“你认为切线方程还能帮助我们解决哪些类型的问题？”激发观众思考和互动。

- **动画与相机特效**
  - 总结文字和公式通过渐显（FadeIn）和书写（Write）动画逐一呈现，镜头在最后阶段进行轻微放大（例如 scale factor 增加到 1.1）或平移，确保观众能集中注意力回顾已讲解的核心内容。
  - 整体过渡保持与前面场景一致的流畅感，确保画面衔接自然。

---

### 【其他整体要求】

- **统一视觉风格**
  - 全场景均采用高清渲染，所有数学公式均以 LaTeX 格式呈现，保证文字与公式的清晰度；色调上大体选用冷色调（蓝、灰、白）为主，关键提示（如场景编号、重点标记）采用红、橙、金色突出显示。

- **动画与转场**
  - 各场景之间建议设置约 1 秒左右的缓冲时间，确保动画切换自然流畅；相机运动（平移、缩放、旋转）与文字、图形出现的时间节点要精心协调，确保每个细节都能在合适的时机捕捉到观众的注意力。
```

---

## 5. Manim 代码生成(大模型)

- **目标**  
  基于详细场景提示，生成完整的 Manim Python 代码，以实现所设计的动画效果。
- **内容要求**
  - **完整性**：代码需涵盖所有场景提示中的视觉元素、动画效果和相机运动指令。
  - **LaTeX 公式**：所有数学公式均采用 LaTeX 格式，确保在渲染时正确显示。
  - **结构清晰**：代码遵循 Manim 社区版的编写规范，包含必要的注释和模块化结构，便于调试与维护。
- **执行方式**  
  大模型在 Java 端接收到详细场景提示后，根据设计提示生成对应的 Python 代码。
- **输出**  
  生成的代码涵盖从背景设置到动画执行的所有细节，确保后续 Python 端可以无误执行并生成预期视频。

---

## 6. 执行代码生成视频（Python 端）

- **目标**  
  通过执行生成的 Manim Python 代码，渲染出包含视频、声音及字幕的完整动画视频。
- **过程说明**
  - **代码执行**：在 Python 环境中调用 Manim 渲染引擎，按代码中动画指令依次执行各个动画片段。
  - **视频渲染**：渲染过程中，Manim 会自动调用 LaTeX 编译器处理 MathTex/Tex 对象，将数学公式编译成图像，并将各动画段落合成最终视频文件。
  - **声音与字幕**：渲染时同时生成音频，并嵌入视频文案（字幕），确保观众获得完整的视听体验。
- **输出**  
  最终生成一个高质量的视频文件，完整展示视频文案、详细场景提示及动画指令所构成的视觉内容，同时包含声音和字幕。

---

## 总结

整个流程实现了从简单用户输入到专业动画视频生成的自动化转换，关键要点包括：

- **层层精细提示**  
  大模型首先生成详细的视频文案，再生成详细场景提示，最终转化为完整的 Manim 代码，确保每一步的信息完整且准确。

- **多阶段验证**  
  各阶段均对信息进行校验，避免错误传递到最终视频，提高视频的专业性和准确性。

- **跨平台协同**  
  Java 端主要负责生成文本提示和代码，而 Python 端负责实际执行和渲染视频，实现了系统各部分的无缝衔接。

这种自动化流程不仅降低了用户的输入门槛，还通过精细提示工程确保了生成动画的高质量和专业水准。

---
