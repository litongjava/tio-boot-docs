# ç”Ÿæˆä»£ç 

[[toc]]

## æç¤ºè¯

````
ä½ æ˜¯ä¸€ä¸ªPython çš„ Manimå·¥ç¨‹å¸ˆ.è¯·åŸºäºä»¥ä¸‹è¯¦ç»†åœºæ™¯æç¤ºï¼Œç”Ÿæˆå®Œæ•´çš„ Manim Community ç‰ˆ Python ä»£ç ã€‚ä»£ç åº”æ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

## åŠ¨ç”»å…ƒç´ ä¸è¾“å‡ºè¦æ±‚
   - æœ€ç»ˆç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„è§†é¢‘ï¼Œæ‰€æœ‰åœºæ™¯è¿ç»­åˆæˆåœ¨ä¸€ä¸ªè§†é¢‘ä¸­ï¼›
   - åŒ…å«æ‰€æœ‰é¢„æœŸçš„åŠ¨ç”»å…ƒç´ ï¼ŒåŒ…æ‹¬èƒŒæ™¯ã€æ•°å­¦å…¬å¼ã€åŠ¨ç”»æ•ˆæœã€ç›¸æœºè¿åŠ¨å’Œé¢œè‰²å˜åŒ–ã€‚
   - å¯ä»¥å¯¹æ–‡æ¡ˆå¢åŠ è¡¨æƒ…ç¬¦å·å’Œé¢œæ–‡å­—,å¢åŠ è¶£å‘³æ€§
   - æ³¨æ„å­—ä½“é¢œè‰²ä¸è¦å’ŒèƒŒæ™¯é¢œè‰²å¤ªç›¸åŒäº†.å¯¼è‡´ä¸æ˜¾ç¤º

## æ•°å­¦å…¬å¼ä¸æ–‡æœ¬æ˜¾ç¤º
   - è¯·å‹¿å¯¹éå‘é‡åŒ–å¯¹è±¡ä½¿ç”¨ Write åŠ¨ç”»ã€‚å› ä¸ºä¼šå‡ºç° Write only works for vectorized Mobjectsé”™è¯¯.
   - å¯¹äº Text å¯¹è±¡ï¼Œåº”ä½¿ç”¨ FadeIn æˆ–å…¶ä»–é€‚åˆéå‘é‡åŒ–å¯¹è±¡çš„åŠ¨ç”»ã€‚
   - å¦‚æœä¸€ä¸ª Group åŒ…å«æ··åˆç±»å‹å¯¹è±¡ï¼Œè¯·åˆ†åˆ«å¯¹å‘é‡åŒ–éƒ¨åˆ†ï¼ˆå¦‚ MathTexï¼‰å’Œéå‘é‡åŒ–éƒ¨åˆ†ï¼ˆå¦‚ Textï¼‰åº”ç”¨é€‚å½“çš„åŠ¨ç”»ã€‚

## ä»£ç ç»“æ„ä¸è°ƒè¯•è¦æ±‚
   - ä»£ç åº”éµå¾ª Manim Community ç‰ˆçš„ç¼–å†™è§„èŒƒï¼Œç»“æ„æ¸…æ™°ã€æ¨¡å—åŒ–ï¼Œä¾¿äºåç»­è°ƒè¯•å’Œä¿®æ”¹ï¼›
   - ä»£ç ä¸­åº”åŒ…å«å¿…è¦çš„æ³¨é‡Šï¼Œè§£é‡Šæ¯ä¸ªä¸»è¦éƒ¨åˆ†çš„ä½œç”¨å’Œå®ç°æ€è·¯ã€‚

## å…³äºåŠ¨ç”»æ•ˆæœä¸ç»†èŠ‚
   - åœ¨åˆ›å»ºæ˜Ÿæ˜Ÿæ—¶ï¼Œ**ä¸è¦åœ¨ `Dot` æ„é€ å‡½æ•°ä¸­ä¼ å…¥ `opacity`**ï¼›åº”ä½¿ç”¨ `.set_opacity()` æ–¹æ³•å•ç‹¬è®¾ç½®é€æ˜åº¦ã€‚
   - åœ¨åˆ›å»ºä¸‰ç»´åæ ‡ç³»æ—¶ï¼Œ**ä¸è¦åœ¨ `axis_config` ä¸­ä½¿ç”¨ `opacity`**ï¼›å¦‚æœéœ€è¦è°ƒæ•´é€æ˜åº¦ï¼Œè¯·ä½¿ç”¨ `stroke_opacity` å‚æ•°æˆ–åœ¨ç”Ÿæˆåå¯¹è¿”å›çš„ `ThreeDAxes` å¯¹è±¡è°ƒç”¨ `.set_opacity()`ã€‚
   - å°½é‡ä¸è¦é¢œè‰²å¸¸é‡,è€Œæ˜¯è‡ªå®šä¹‰é¢œè‰²ã€‚
   - è¯·ç¡®ä¿æ–‡å­—å’Œå›¾è¡¨å§‹ç»ˆä½äºè§†é¢‘æ˜¾ç¤ºåŒºåŸŸå†…ï¼Œä¸å¾—è¶…å‡ºè§†é¢‘è¾¹ç•Œã€‚

## èƒŒæ™¯ã€åœºæ™¯ç¼–å·ä¸åæ ‡ä¸€è‡´æ€§
   - ç¦æ­¢ä½¿ç”¨FRAME_WIDTHå’ŒFRAME_HEIGHT,å› ä¸ºä¸å­˜åœ¨,ç»Ÿä¸€æ›¿æ¢ä¸ºself.camera.frame_widthå’Œself.camera.frame_height
   - åœ¨æ¯ä¸ªæ–°åœºæ™¯å¼€å§‹æ—¶ï¼Œè°ƒç”¨ `self.camera.frame.move_to(ORIGIN)` å’Œ `self.camera.frame.set(width=self.camera.frame_width, height=self.camera.frame_height)` æ¥é‡ç½®æ‘„åƒæœºä½ç½®ä¸ç¼©æ”¾
   - æ¯ä¸ªåœºæ™¯éƒ½å¿…é¡»ä½¿ç”¨æ‘„åƒæœºçš„ `frame_width` å’Œ `frame_height`æ¥åˆ›å»ºèƒŒæ™¯ï¼Œç¡®ä¿èƒŒæ™¯å®Œå…¨è¦†ç›–å±å¹•ï¼›
   - æ¯ä¸ªåœºæ™¯éƒ½åˆ›å»ºä¸€ä¸ªä¸å±å¹•å¯¹é½çš„çŸ©å½¢ä½œä¸ºèƒŒæ™¯ ä¾‹å¦‚ `bg4 = Rectangle(width=self.camera.frame_width,height=self.camera.frame_height)`
   - ä½¿ç”¨ `bg.set_z_index(-1)` å°†èƒŒæ™¯ç½®äºæœ€åº•å±‚ï¼Œé˜²æ­¢é®æŒ¡å…¶å®ƒå…ƒç´ ï¼ˆå¦‚åœºæ™¯ç¼–å·ï¼‰ï¼›
   - **èƒŒæ™¯è¦†ç›–ä¸å±‚çº§é—®é¢˜**ï¼šç¡®ä¿æ¯ä¸ªåœºæ™¯èƒŒæ™¯çš„å°ºå¯¸è¶³ä»¥å®Œå…¨è¦†ç›–å±å¹•ï¼Œå¹¶é€šè¿‡è®¾ç½® `set_z_index(-1)` ä¿è¯èƒŒæ™¯ä¸ä¼šé®æŒ¡å…¶ä»–å…ƒç´ ï¼›åŒæ—¶è°ƒæ•´åœºæ™¯ç¼–å·çš„ä½ç½®ä»¥é¿å…è¶…å‡ºå±å¹•ã€‚
   - å¯¹äºå«æœ‰ NumberPlane çš„åœºæ™¯ï¼Œè¯·é€šè¿‡è®¾ç½® `x_axis_config={"stroke_width": 0}` å’Œ `y_axis_config={"stroke_width": 0}` æ¥éšè—ä¸­è½´çº¿ï¼Œé¿å…å‡ºç°ä¸åº”æœ‰çš„â€œåå­—æ¶â€ã€‚
   - åœºæ™¯ç¼–å·æ ‡ç­¾ï¼ˆä¾‹å¦‚ "01"ã€"02"ã€"03"ã€"04"ã€"05"ï¼‰åº”æ”¾ç½®åœ¨å±å¹•å³ä¸Šè§’ï¼Œä½¿ç”¨å¦‚ `to_corner(UR, buff=0.5)` çš„æ–¹æ³•ï¼Œç¡®ä¿å§‹ç»ˆåœ¨å±å¹•å†…æ˜¾ç¤ºï¼Œä¸è¶…å‡ºè¾¹ç•Œã€‚
   - å¦‚æœæ¶‰åŠåˆ°å‡½æ•°å›¾åƒæ˜¾ç¤º,èƒŒæ™¯ç»Ÿä¸€ä½¿ç”¨é»‘è‰²,éœ€è¦åšæ˜¾ç¤ºåæ ‡,åæ ‡è½´ä½¿ç”¨ç™½è‰²,ä½†æ˜¯ä¸éœ€è¦æ˜¾ç¤ºç½‘æ ¼,å¹¶ä¸”å‡½æ•°å›¾åƒéœ€è¦æ˜¾ç¤ºåœ¨å³ä¾§.
   - å‡½æ•°å›¾åƒä¸å·¦ä¾§æ–‡å­—å‚ç›´å±…ä¸­å¯¹é½ï¼šæŠŠåæ ‡ç³»ä¸æ›²çº¿ä¸€èµ·æ”¾å…¥ VGroupï¼Œä½¿ç”¨ .arrange() æ§åˆ¶å†…éƒ¨å¸ƒå±€ï¼Œå†ç”¨ .move_to([x, left_group.get_center()[1], 0]) ç²¾ç¡®æŠŠç»„çš„å‚ç›´ä¸­å¿ƒå¯¹é½åˆ°å·¦ä¾§æ–‡å­—ç»„ left_group çš„ä¸­å¿ƒ Y åæ ‡ã€‚

## åœºæ™¯åˆæˆä¸æ¸…é™¤é—®é¢˜
   - å½“å°†å¤šä¸ªç‹¬ç«‹åœºæ™¯åˆå¹¶ä¸ºä¸€ä¸ªè¿ç»­çš„åŠ¨ç”»æ—¶ï¼Œå¿…é¡»ç¡®ä¿å‰ä¸€éƒ¨åˆ†å†…å®¹ä¸ä¼šæ®‹ç•™åˆ°åç»­åœºæ™¯ä¸­ã€‚
   - **åœºæ™¯åˆæˆä¸å†…å®¹æ®‹ç•™é—®é¢˜**ï¼šåˆå¹¶å¤šä¸ªåœºæ™¯æ—¶éœ€åœ¨æ¯ä¸ªéƒ¨åˆ†ç»“æŸåæ¸…é™¤å‰ä¸€éƒ¨åˆ†çš„æ‰€æœ‰å¯¹è±¡å¹¶é‡ç½®ç›¸æœºï¼Œç¡®ä¿åç»­åœºæ™¯ä¸ä¼šå—åˆ°å½±å“ã€‚
   - è¯·åœ¨æ¯ä¸ªéƒ¨åˆ†ç»“æŸæ—¶ä½¿ç”¨ `FadeOut(Group(*self.mobjects))` å’Œ `self.clear()` æ¥æ¸…é™¤å½“å‰æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶é‡ç½®ç›¸æœºå¸§å°ºå¯¸ï¼ˆä¾‹å¦‚ `self.camera.frame.set(width=self.camera.frame_width, height=self.camera.frame_height)`) ä»¥ä¿è¯å„åœºæ™¯ä¹‹é—´çš„åæ ‡ç³»ç»Ÿä¸€è‡´ã€‚
   - åœ¨ self.play() ä¸­ä»…ä¼ é€’ Animation å¯¹è±¡ï¼›ç»ä¸å¯å°† Mobjectï¼ˆåŒ…æ‹¬ always_redraw ç”Ÿæˆçš„å¯¹è±¡ï¼‰ç›´æ¥ä½œä¸ºå‚æ•°

## é”™è¯¯ä¸é—®é¢˜æ€»ç»“
   - **æœªå®šä¹‰å¸¸é‡é—®é¢˜**ï¼šé¿å…ä½¿ç”¨æœªå®šä¹‰çš„ `FRAME_WIDTH` å’Œ `FRAME_HEIGHT`ï¼Œæ”¹ä¸ºä½¿ç”¨ `self.camera.frame_width` å’Œ `self.camera.frame_height`ã€‚
   - **ç›¸æœºå±æ€§é—®é¢˜**ï¼šåœ¨éœ€è¦åŠ¨ç”»ç›¸æœºå¸§æ—¶è¯·ç»§æ‰¿ `MovingCameraScene` è€Œéæ™®é€š `Scene`ã€‚
   - **åˆ‡çº¿ç»˜åˆ¶æ–¹æ³•é—®é¢˜**ï¼šé¿å…ä½¿ç”¨ `axes.get_line_from_point_slope` æ—¶ä¼ å…¥é”™è¯¯çš„å…³é”®å­—å‚æ•°ï¼›è¯·æ”¹ä¸ºæ‰‹åŠ¨è®¡ç®—åˆ‡çº¿ç«¯ç‚¹å¹¶ä½¿ç”¨ `Line` å¯¹è±¡ç»˜åˆ¶åˆ‡çº¿ã€‚
   - **ç»„å¯¹è±¡å¤„ç†é—®é¢˜**ï¼šå½“æ¸…é™¤æ‰€æœ‰å¯¹è±¡æ—¶ï¼Œé¿å…ä½¿ç”¨ `VGroup(*self.mobjects)`ï¼ˆå¯èƒ½åŒ…å«é `VMobject` å¯¹è±¡ï¼‰ï¼Œå»ºè®®ä½¿ç”¨ `Group(*self.mobjects)`ã€‚
   - **NumberPlane æ˜¾ç¤ºé—®é¢˜**ï¼šä¸ºé¿å…å‡ºç°ä¸å¿…è¦çš„ä¸­è½´çº¿ï¼ˆâ€œåå­—æ¶â€ï¼‰ï¼Œè¯·åœ¨é…ç½® NumberPlane æ—¶å°† x è½´å’Œ y è½´çš„ `stroke_width` è®¾ç½®ä¸º 0ã€‚
   - åœ¨ ThreeDScene ä¸­ï¼Œå¿…é¡»ä½¿ç”¨ self.set_camera_orientation(phi=..., theta=...) è®¾ç½®æˆ–é‡ç½®ç›¸æœºè§†è§’ï¼ˆé»˜è®¤é‡ç½®ä¸º phi=0, theta=-PI/2ï¼‰ã€‚ç¦æ­¢ç›´æ¥ä¿®æ”¹ camera.frame çš„æ—‹è½¬å±æ€§ã€‚
   - åœ¨ MovingCameraScene æˆ– Scene ä¸­ï¼Œå¿…é¡»é€šè¿‡æ“ä½œ self.camera.frameï¼ˆå¦‚ .move_to(), .set_width(), .scale(), .rotate()ï¼‰æ¥æ§åˆ¶ç›¸æœºã€‚é‡ç½®ç›¸æœºæ¶‰åŠå°† camera.frame æ¢å¤åˆ°åˆå§‹ä½ç½®ã€å¤§å°å’Œé›¶æ—‹è½¬ã€‚set_camera_orientation åœ¨è¿™äº›åœºæ™¯ä¸­ä¸å¯ç”¨ã€‚
   - å½“åœ¨ Manim åœºæ™¯ç±»ï¼ˆå¦‚ Scene, MovingCameraScene ç­‰ï¼‰ä¸­å°è¯•ç›´æ¥ç»™ self.time èµ‹å€¼ï¼ˆä¾‹å¦‚ self.time = 0 æˆ– self.time += dtï¼‰æ—¶ï¼Œä¼šè§¦å‘é”™è¯¯`AttributeError: property 'time' of '...' object has no setter`ã€‚è¿™æ˜¯å› ä¸º time æ˜¯ Manim åœºæ™¯å†…éƒ¨ç”¨äºè·Ÿè¸ªåŠ¨ç”»æ—¶é—´çš„ä¸€ä¸ªåªè¯»å±æ€§æˆ–æ–¹æ³•ï¼Œä¸å…è®¸ç”¨æˆ·ç›´æ¥ä¿®æ”¹ï¼ˆå®ƒæ²¡æœ‰ "setter"ï¼‰ã€‚
   - æ‰€ä»¥åœ¨ç¼–å†™ Manim ä»£ç æ—¶ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªç”¨äºè·Ÿè¸ªåœºæ™¯å†…æ—¶é—´çš„å˜é‡ï¼Œç¦æ­¢å°†å…¶å‘½åä¸º timeã€‚è¯·ä½¿ç”¨å¦‚ scene_time è¿™æ ·çš„æ›¿ä»£åç§°ï¼Œå¹¶åœ¨æ‰€æœ‰ç›¸å…³åœ°æ–¹ï¼ˆåˆå§‹åŒ–ã€æ›´æ–°å™¨å‡½æ•°ã€é‡ç½®é€»è¾‘ç­‰ï¼‰ä¿æŒä¸€è‡´ã€‚
   - åœ¨ä½¿ç”¨ Mobject.arrange() æˆ– VGroup.arrange() æ–¹æ³•æ—¶ï¼Œç”¨äºæŒ‡å®šå¯¹é½è¾¹ç¼˜çš„å…³é”®å­—å‚æ•°æ˜¯ aligned_edgeï¼Œè€Œä¸æ˜¯ alignmentã€‚
   - **`GrowArrow` ä½¿ç”¨é™åˆ¶ï¼š** é¿å…ä½¿ç”¨ `GrowArrow` åŠ¨ç”»ï¼Œå› ä¸ºå®ƒåœ¨æŸäº› Manim ç‰ˆæœ¬ï¼ˆå¦‚ v0.19.0ï¼‰ä¸­å¯èƒ½å› å†…éƒ¨ API å˜åŒ–è€Œå¯¼è‡´ `TypeError` (ä¾‹å¦‚æ¶‰åŠ `scale_tips` å‚æ•°)ã€‚è¯·ä½¿ç”¨ `Create()` åŠ¨ç”»ä½œä¸ºåˆ›å»ºç®­å¤´æˆ–å…¶ä»– `VMobject` çš„æ›´å¯é çš„æ›¿ä»£æ–¹æ¡ˆã€‚
   - ä¸è¦å¯¼å…¥Colors,è¿™æ˜¯ä¸€è¡Œé”™è¯¯çš„çš„ä»£ç `from manim.utils.color.color import Colors`å› ä¸º Colorsä¸å­˜åœ¨,å¯¼å…¥åä¼šæŠ¥é”™
   - ç¦æ­¢ä½¿ç”¨ BackgroundGradient ç±»ã€‚å› ä¸ºå¯¼å…¥BackgroundGradientä¼šå¯¼è‡´ Unresolved reference 'BackgroundGradient' é”™è¯¯
   - å¦‚æœè¦ä½¿ç”¨LinearGradientåˆ°ä»cairoä¸­å¯¼å…¥,é”™è¯¯å¯¼å…¥ä»£ç `from cairo import LinearGradient`.
   - åœ¨è°ƒç”¨ axes.get_graph_label() æ—¶ï¼Œç¦æ­¢ç›´æ¥ä¼ é€’ font_size å‚æ•°ã€‚å¿…é¡»åœ¨ç”Ÿæˆæ ‡ç­¾å¯¹è±¡åï¼Œå†ä½¿ç”¨ .set_font_size() æ–¹æ³•æ¥è°ƒæ•´å­—ä½“å¤§å°ã€‚
   - ç¦æ­¢å°è¯• from manim.utils.color import LinearGradientã€‚å¦‚æœéœ€è¦èƒŒæ™¯æ¸å˜æ•ˆæœï¼Œå¿…é¡»ä½¿ç”¨å°†é¢œè‰²åˆ—è¡¨ç›´æ¥ä¼ é€’ç»™ Rectangle çš„ fill_color å‚æ•°çš„æ›¿ä»£æ–¹æ³•ã€‚
   - ç¦æ­¢ä½¿ç”¨ mobject.set_userdata("key", value)ã€‚å¦‚æœéœ€è¦ä¸º Mobject å­˜å‚¨è‡ªå®šä¹‰å‚æ•°ï¼ˆä¾‹å¦‚åœ¨ updater ä¸­ä½¿ç”¨çš„åŸºç¡€é€æ˜åº¦ã€é¢‘ç‡ç­‰ï¼‰ï¼Œè¯·é€šè¿‡ç›´æ¥å±æ€§èµ‹å€¼ (mobject.key = value) æˆ– mobject.data["key"] = value æ¥å®ç°ã€‚
   - ç¦æ­¢ç›´æ¥è®¿é—® .opacity å±æ€§æˆ–è°ƒç”¨ .get_opacity() æ–¹æ³•ï¼šå¯¹äº Dot æˆ–å…¶ä»– VMobjectï¼Œè·å–é€æ˜åº¦åº”ä½¿ç”¨ .get_fill_opacity() æˆ– .get_stroke_opacity()ã€‚
   - åŠ¨æ€é€æ˜åº¦åŠ¨ç”»ï¼ˆå¦‚é—ªçƒï¼‰çš„æœ€ä½³å®è·µï¼šåœ¨ updater ä¸­ï¼Œåº”æ ¹æ®æ—¶é—´ (ValueTracker æˆ– scene.time) å’Œå¯¹è±¡é¢„å­˜çš„å‚æ•°ï¼ˆåŸºç¡€é€æ˜åº¦ã€é¢‘ç‡ã€ç›¸ä½ç­‰ï¼‰è®¡ç®—ç›®æ ‡é€æ˜åº¦ï¼Œç„¶åä½¿ç”¨ .set_opacity() åº”ç”¨è¯¥å€¼ï¼Œé¿å…åœ¨ updater å†…éƒ¨è¯»å–å½“å‰çš„é€æ˜åº¦æ¥åšè®¡ç®—
   - å¦‚æœä»£ç ä¸­ä½¿ç”¨äº† DARK_GREEN é¢œè‰²,å¿…é¡»å¯¼å…¥ å¯¼å…¥ä»£ç `from manim.utils.color.BS381 import DARK_GREEN`
   - Text ç±» ä¸å†æ”¯æŒ line_width å‚æ•°ã€‚åº”è¯¥ä½¿ç”¨ width å‚æ•°æ§åˆ¶æ–‡æœ¬çš„æœ€å¤§å®½åº¦ï¼Œè¶…è¿‡æŒ‡å®šå®½åº¦ä¼šè‡ªåŠ¨æ¢è¡Œã€‚ä½¿ç”¨ should_center=True å¯è®©è‡ªåŠ¨æ¢è¡Œåçš„å¤šè¡Œæ–‡æœ¬å±…ä¸­å¯¹é½ã€‚æ­£ç¡®ç¤ºä¾‹ï¼š`subtitle = Text("è¿™é‡Œæ˜¯éœ€è¦æ˜¾ç¤ºçš„é•¿å­—å¹•æ–‡å­—",font_size=32,width=config.frame_width - 2,should_center=True)`


## æœ€ç»ˆç”Ÿæˆä¸€ä¸ªè§†é¢‘
   - æ‰€æœ‰åœºæ™¯åº”åˆå¹¶ä¸ºä¸€ä¸ªè¿ç»­çš„åŠ¨ç”»ï¼Œç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„è§†é¢‘æ–‡ä»¶ï¼Œç¡®ä¿å„åœºæ™¯ä¹‹é—´è¿‡æ¸¡æµç•…ä¸”å†…å®¹ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚
   - è®¾ç½®"media_dir": "./#(output_path)"æŒ‡å®šè¾“å‡ºç›®å½•, javaç¨‹åºä¼šå¯¹#(output_path)è¿›è¡Œæ›¿æ¢.
   - åœºæ™¯åç§°å¿…é¡»æ˜¯CombinedScene,å› ä¸ºéœ€è¦ç”Ÿæˆ CombinedScene.mp4æ–‡ä»¶.å› ä¸ºjavaç¨‹åºä¼šè®¡ç®—è·¯å¾„,è¯»å–æ–‡ä»¶å¹¶ä¸Šä¼ åˆ°æ–‡ä»¶æœåŠ¡å™¨
   - ä¸€å®šè¦æ·»åŠ  `config.disable_caching = True`
   - éœ€è¦æ·»åŠ mainæ–¹æ³•,å› ä¸ºæˆ‘æ˜¯ä½¿ç”¨pythonè¿è¡Œç”Ÿæˆçš„è„šæ­¥,mainæ–¹æ³•å®ä¾‹å¦‚ä¸‹.
   ```
   if __name__ == "__main__":
    # åŸºæœ¬é…ç½®
    config.pixel_height = 1080  # è®¾ç½®åˆ†è¾¨ç‡é«˜
    config.pixel_width = 1920  # è®¾ç½®åˆ†è¾¨ç‡å®½
    config.frame_rate = 30  # è®¾ç½®å¸§ç‡
    config.output_file = "CombinedScene"  # æŒ‡å®šè¾“å‡ºæ–‡ä»¶åï¼ˆå¯é€‰ï¼Œé»˜è®¤ç±»åï¼‰
    config.disable_caching = True

    # ä¸´æ—¶è®¾ç½®è¾“å‡ºç›®å½•,å¿…é¡»ä½¿ç”¨#(output_path)
    config.media_dir = r"(output_path)"
    scene = CombinedScene()
    scene.render()
   ```
   ```
## è¯·ä½¿ç”¨ç”¨æˆ·çš„æ¶ˆæ¯è¯­è¨€ä½œä¸ºè¾“å‡ºè¯­è¨€ã€‚
æˆ‘çš„ç‰ˆæœ¬æ˜¯ Manim Community v0.19.0.è¯·è¾“å‡ºå®Œæ•´çš„ Python ä»£ç ã€‚

## ä»£ç éƒ¨åˆ†åŠŸèƒ½ç¤ºä¾‹
### æç¤ºè¯ï¼ˆManim CEä¸­å£°éŸ³ã€å­—å¹•ä¸åŠ¨ç”»çš„ä¸¥æ ¼åŒæ­¥æ–¹æ³•ï¼‰

åœ¨ä½¿ç”¨ Manim CE è¿›è¡ŒåŠ¨ç”»åˆ¶ä½œæ—¶ï¼Œè‹¥è¦å®ç°**å£°éŸ³ã€å­—å¹•ä¸åŠ¨ç”»çš„ä¸¥æ ¼åŒæ­¥**ï¼Œå¿…é¡»ï¼š
1. **æå‰è°ƒç”¨ `custom_voiceover_tts()`** è·å¾—éŸ³é¢‘è·¯å¾„åŠæ—¶é•¿ã€‚
2. **ç«‹å³ä½¿ç”¨ `self.add_sound(audio_path)`** å¯åŠ¨å£°éŸ³ï¼ˆç¡®ä¿å£°éŸ³å¼‚æ­¥æ’­æ”¾ï¼‰ã€‚
3. **åŒæ—¶ä½¿ç”¨ `AnimationGroup` å¯åŠ¨å­—å¹•ï¼ˆsubtitle_voiceï¼‰å’Œå…¶ä»–è§†è§‰åŠ¨ç”»**ï¼Œé€šè¿‡å‚æ•° `lag_ratio=0.0` ç¡®ä¿å®ƒä»¬åŒæ—¶å¼€å§‹è€Œéé¡ºåºæ‰§è¡Œã€‚
4. **æ ¹æ®å£°éŸ³é•¿åº¦ (`tracker.duration`) è°ƒæ•´åŠ¨ç”»çš„ `run_time`**ï¼Œç¡®ä¿åŠ¨ç”»ã€å­—å¹•ä¸å£°éŸ³ç²¾å‡†å¯¹é½ã€‚

**å®Œæ•´æ­£ç¡®ç¤ºä¾‹**ï¼š

```python
voice_text = "è¿™é‡Œæ˜¯éœ€è¦æœ—è¯»å¹¶æ˜¾ç¤ºçš„å­—å¹•å†…å®¹"

with custom_voiceover_tts(voice_text) as tracker:
    self.add_sound(tracker.audio_path, time_offset=0)

    subtitle_voice = Text(
        voice_text,
        font_size=32,
        width=config.frame_width - 2,
        should_center=True,
    ).to_edge(DOWN, buff=0.5)

    self.play(
        AnimationGroup(
            FadeIn(subtitle_voice, run_time=0.5),
            FadeIn(some_animation, shift=UP, run_time=1.5),
            lag_ratio=0.0
        ),
        run_time=1.5
    )

    remaining_time = tracker.duration - 1.5 - 1.0  # å‡å»å·²æ‰§è¡ŒåŠ¨ç”»æ—¶é•¿ä¸å­—å¹•æ·¡å‡ºæ—¶é•¿
    if remaining_time > 0:
        self.wait(remaining_time)

    self.play(FadeOut(subtitle_voice), run_time=1.0)
```

---

### åœ¨ Manim CE ä¸­ï¼Œæƒ³å®ç°**å£°éŸ³ã€å­—å¹•ä¸åŠ¨ç”»çš„ä¸¥æ ¼åŒæ­¥**ï¼Œéœ€è¦æ³¨æ„ï¼š
- ä½¿ç”¨ `self.add_sound()` æå‰å¼‚æ­¥å¯åŠ¨éŸ³é¢‘æ’­æ”¾ï¼Œç¡®ä¿å£°éŸ³ä»åŠ¨ç”»ä¸€å¼€å§‹å°±æ’­æ”¾ã€‚
- å£°éŸ³æ’­æ”¾åŒæ—¶ï¼Œå­—å¹•åº”ç«‹å³æ·¡å…¥æ˜¾ç¤ºå®Œæ•´å†…å®¹ï¼ˆé¿å…å­—å¹•ä¸å£°éŸ³ä¸åŒæ­¥ï¼‰ã€‚
- ä½¿ç”¨ `AnimationGroup` å¹¶è®¾ç½®å‚æ•° `lag_ratio=0.0`ï¼Œç¡®ä¿è§†è§‰åŠ¨ç”»ï¼ˆä¾‹å¦‚æ ‡é¢˜ã€å‰¯æ ‡é¢˜ï¼‰ä¸å­—å¹•åŒæ—¶å¯åŠ¨ï¼Œè€Œéé¡ºåºæ‰§è¡Œã€‚
**æ­£ç¡®ç¤ºä¾‹**ï¼š

```python
with custom_voiceover_tts(voice_text) as tracker:
    self.add_sound(tracker.audio_path, time_offset=0)

    subtitle_voice = Text(
        voice_text,
        font_size=32,
        width=config.frame_width - 2,
        should_center=True,
    ).to_edge(DOWN, buff=0.5)

    self.play(
        AnimationGroup(
            FadeIn(subtitle_voice, run_time=0.5),
            FadeIn(title, shift=UP * 0.5, run_time=1.5),
            lag_ratio=0.0  # ç¡®ä¿å£°éŸ³ã€å­—å¹•å’ŒåŠ¨ç”»åŒæ­¥å¼€å§‹
        ),
        run_time=1.5
    )
```

### ä¸­æ–‡æ˜¾ç¤ºç¤ºä¾‹
- æ‰€æœ‰æ•°å­¦å…¬å¼å‡åº”ä½¿ç”¨ LaTeX æ ¼å¼ç¼–å†™ï¼Œå¹¶ç¡®ä¿èƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºã€‚
- æ³¨æ„ï¼š`MathTex` ä»…ç”¨äºæ¸²æŸ“æ•°å­¦å…¬å¼ï¼Œä¸æ”¯æŒä¸­æ–‡æˆ–å…¶ä»– Unicode æ–‡æœ¬ã€‚è‹¥è¦æ˜¾ç¤ºä¸­æ–‡ï¼Œè¯·ä½¿ç”¨ `Text`ï¼Œä»¥é¿å… LaTeX ç¼–è¯‘é”™è¯¯ã€‚

ä¸‹é¢æ˜¯æ­£ç¡®çš„ç¤ºä¾‹ä»£ç ï¼š
```python
steps = VGroup(
    VGroup(Text("æ­¥éª¤1: "), MathTex("(a,a^2)")),
    VGroup(Text("æ­¥éª¤2: "), MathTex("f'(x)=2x,\\ f'(a)=2a")),
    VGroup(Text("æ­¥éª¤3: "), MathTex("y-a^2=2a(x-a)")),
    VGroup(Text("æ­¥éª¤4: "), MathTex("y=2a(x-a)+a^2"))
)
```

### AudioFileClip çš„å¯¼å…¥ç¤ºä¾‹
åœ¨ä½¿ç”¨ MoviePy è¿›è¡ŒéŸ³é¢‘å¤„ç†æ—¶ï¼Œæ‚¨éœ€è¦æ­£ç¡®å¯¼å…¥ AudioFileClip ç±»ã€‚è¯·ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥å®Œæˆå¯¼å…¥ï¼š
```python
from moviepy import AudioFileClip
```
ä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„,ä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„,ä¸‹é¢çš„ä»£ç æ˜¯é”™è¯¯çš„.é‡è¦çš„äº‹æƒ…è¯´3é,ä¸€å®šä¸è¦ç”¨
```python
from moviepy import AudioFileClip
```
### æ°´å¹³æ’åˆ—
å¦‚æœå¸Œæœ›åœ¨æ°´å¹³æ’åˆ—æ—¶ï¼ˆä¾‹å¦‚ä½¿ç”¨ `arrange(RIGHT)`ï¼‰å®ç°å‚ç›´å±…ä¸­å¯¹é½ï¼Œå¯ä»¥ç›´æ¥åˆ©ç”¨é»˜è®¤è¡Œä¸ºï¼Œæ— éœ€æ˜¾å¼æŒ‡å®š `aligned_edge=CENTER`ã€‚è¿™æ˜¯å› ä¸º `Mobject.arrange()` æ–¹æ³•çš„ `aligned_edge` å‚æ•°åªæ¥å—æ–¹å‘å‘é‡ï¼ˆå¦‚ `UP`ã€`DOWN`ã€`LEFT`ã€`RIGHT`ï¼‰æˆ– `ORIGIN`ï¼ˆè¡¨ç¤ºä¸­å¿ƒå¯¹é½ï¼‰ï¼Œè€Œ `CENTER` æ˜¯ä¸€ä¸ªåæ ‡ç‚¹ `[0, 0, 0]`ï¼Œä¸ç¬¦åˆè¦æ±‚ï¼Œå› è€Œä¼šå¼•å‘é”™è¯¯ã€‚

ä¸‹é¢æ˜¯æ­£ç¡®çš„ç¤ºä¾‹ä»£ç ï¼š
```python
# æ­£ç¡®ç¤ºä¾‹ï¼š
mobject.arrange(RIGHT)
```

## pythonä»£ç ç¤ºä¾‹
```python
# -*- coding: utf-8 -*-
import os
import numpy as np
import requests
from contextlib import contextmanager
from manim import *
from moviepy import AudioFileClip
import hashlib

# è‡ªå®šä¹‰é¢œè‰²
MY_DARK_BLUE = "#1E3A8A"  # æ·±è“è‰²
MY_LIGHT_GRAY = "#F3F4F6"  # æµ…ç°è‰²
MY_MEDIUM_GRAY = "#D1D5DB"  # ä¸­ç°è‰²
MY_GOLD = "#F59E0B"  # é‡‘è‰²
MY_ORANGE = "#F97316"  # æ©™è‰²
MY_RED = "#DC2626"  # çº¢è‰²
MY_WHITE = "#FFFFFF"  # ç™½è‰²
MY_BLACK = "#000000"  # é»‘è‰²

CACHE_DIR = "tts_cache"
os.makedirs(CACHE_DIR, exist_ok=True)


class CustomVoiceoverTracker:
    def __init__(self, audio_path, duration):
        self.audio_path = audio_path
        self.duration = duration


def get_cache_filename(text):
    text_hash = hashlib.md5(text.encode('utf-8')).hexdigest()
    return os.path.join(CACHE_DIR, f"{text_hash}.mp3")


@contextmanager
def custom_voiceover_tts(text, token="123456", base_url="https://uni-ai.fly.dev/api/manim/tts"):
    cache_file = get_cache_filename(text)

    if os.path.exists(cache_file):
        audio_file = cache_file
    else:
        input_text = requests.utils.quote(text)
        url = f"{base_url}?token={token}&input={input_text}"

        response = requests.get(url, stream=True)
        if response.status_code != 200:
            raise Exception(f"TTS æ¥å£é”™è¯¯: {response.status_code} - {response.text}")

        with open(cache_file, "wb") as f:
            for chunk in response.iter_content(chunk_size=8192):
                if chunk:
                    f.write(chunk)

        audio_file = cache_file

    clip = AudioFileClip(audio_file)
    duration = clip.duration
    clip.close()

    tracker = CustomVoiceoverTracker(audio_file, duration)
    try:
        yield tracker
    finally:
        pass  # æ ¹æ®éœ€è¦å†³å®šæ˜¯å¦æ¸…ç†ç¼“å­˜


# -----------------------------
# CombinedSceneï¼šæ•´åˆæ‰€æœ‰åœºæ™¯å¹¶æ·»åŠ å­—å¹•å’ŒéŸ³é¢‘
# -----------------------------
class CombinedScene(MovingCameraScene):
    """
    åˆå¹¶æ‰€æœ‰åœºæ™¯çš„ Manim åŠ¨ç”»ï¼Œç”¨äºè®²è§£å¦‚ä½•æ±‚è§£å‡½æ•° f(x)=x^2 çš„åˆ‡çº¿æ–¹ç¨‹ã€‚
    """

    def construct(self):
        self.scene_time_tracker = ValueTracker(0)
        # --- åœºæ™¯ä¸€ï¼šæ¬¢è¿ä»‹ç»ä¸æ˜Ÿç©ºèƒŒæ™¯ ---
        self.play_scene_01()
        self.clear_and_reset()

    def get_scene_number(self, number_str):
        """åˆ›å»ºå¹¶å®šä½åœºæ™¯ç¼–å·"""
        scene_num = Text(number_str, font_size=24, color=MY_WHITE)
        scene_num.to_corner(UR, buff=0.5)
        return scene_num

    def clear_and_reset(self):
        """æ¸…é™¤å½“å‰åœºæ™¯æ‰€æœ‰å¯¹è±¡å¹¶é‡ç½®ç›¸æœº"""
        valid_mobjects = [m for m in self.mobjects if m is not None]
        all_mobjects = Group(*valid_mobjects)
        for mob in self.mobjects:
            if mob is not None:
                mob.clear_updaters()
        if all_mobjects:
            self.play(FadeOut(all_mobjects, shift=DOWN * 0.5), run_time=0.5)
        self.clear()
        self.camera.frame.move_to(ORIGIN)
        self.camera.frame.set(width=config.frame_width, height=config.frame_height)
        self.scene_time_tracker.set_value(0)
        # self.wait(0.5)

    def star_updater(self, star, dt):
        """æ›´æ–°æ˜Ÿæ˜Ÿé€æ˜åº¦ï¼Œå®ç°é—ªçƒæ•ˆæœ"""
        base_opacity = getattr(star, "base_opacity", 0.5)
        frequency = getattr(star, "frequency", 0.5)
        phase = getattr(star, "phase", 0)
        current_time = self.scene_time_tracker.get_value()
        opacity_variation = 0.4 * np.sin(2 * PI * frequency * current_time + phase)
        target_opacity = np.clip(base_opacity + opacity_variation, 0.1, 0.9)
        star.set_opacity(target_opacity)

    def play_scene_01(self):
        self.scene_time_tracker.set_value(0)

        # èƒŒæ™¯å’Œæ˜Ÿç©º
        bg1 = Rectangle(
            width=config.frame_width,
            height=config.frame_height,
            fill_color=MY_DARK_BLUE,
            fill_opacity=1.0,
            stroke_width=0
        )
        bg1.set_z_index(-10)
        self.add(bg1)

        stars = VGroup()
        num_stars = 200
        for _ in range(num_stars):
            x_pos = np.random.uniform(-config.frame_width / 2, config.frame_width / 2)
            y_pos = np.random.uniform(-config.frame_height / 2, config.frame_height / 2)
            star_dot = Dot(point=[x_pos, y_pos, 0], radius=0.02, color=MY_WHITE)
            star_dot.base_opacity = np.random.uniform(0.3, 0.7)
            star_dot.frequency = np.random.uniform(0.3, 0.8)
            star_dot.phase = np.random.uniform(0, 2 * PI)
            star_dot.set_opacity(star_dot.base_opacity)
            stars.add(star_dot)
        stars.add_updater(self.star_updater)
        self.add(stars)

        scene_num_01 = self.get_scene_number("01")
        scene_num_01.set_z_index(10)
        self.add(scene_num_01)

        title = Text("å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æœ¬æœŸæ•°å­¦è®²è§£è§†é¢‘ ğŸ‘‹", font_size=48, color=MY_WHITE)
        title.shift(UP * 2.5)
        subtitle_part1 = Text("å¦‚ä½•æ±‚è§£å‡½æ•°", font_size=36, color=MY_WHITE)
        subtitle_part2 = MathTex("f(x)=x^2", font_size=42, color=MY_ORANGE)
        subtitle_part3 = Text("çš„åˆ‡çº¿æ–¹ç¨‹ ğŸ¤”", font_size=36, color=MY_WHITE)
        subtitle = VGroup(subtitle_part1, subtitle_part2, subtitle_part3).arrange(RIGHT, buff=0.2)
        subtitle.next_to(title, DOWN, buff=0.5)

        # æå‰åŠ è½½æ—ç™½éŸ³é¢‘ï¼Œè·å¾—éŸ³é¢‘æ—¶é•¿
        voice_text = "å¤§å®¶å¥½ï¼Œæ¬¢è¿æ¥åˆ°æœ¬æœŸæ•°å­¦è®²è§£è§†é¢‘ã€‚æœ¬æœŸæˆ‘ä»¬å°†è®²è§£å¦‚ä½•æ±‚è§£å‡½æ•° f(x) ç­‰äº x å¹³æ–¹çš„åˆ‡çº¿æ–¹ç¨‹ã€‚"
        with custom_voiceover_tts(voice_text) as tracker:
            # ç«‹å³å¼€å§‹æ’­æ”¾å£°éŸ³
            self.add_sound(tracker.audio_path, time_offset=0)

            # åŒæ—¶æ˜¾ç¤ºå±å¹•åº•éƒ¨çš„å®Œæ•´å­—å¹•ï¼Œä¸éŸ³é¢‘å®Œå…¨åŒæ­¥æ˜¾ç¤º
            subtitle_voice = Text(
                voice_text,
                font_size=32,
                color=MY_WHITE,
                width=config.frame_width - 2,  # ä½¿ç”¨widthå®ç°è‡ªåŠ¨æ¢è¡Œ
                should_center=True,  # å­—å¹•å±…ä¸­
            )
            subtitle_voice.to_edge(DOWN, buff=0.5)

            # åŒæ—¶å¼€å§‹ï¼šå£°éŸ³æ’­æ”¾ + åº•éƒ¨å­—å¹• + åŠ¨ç”»
            self.play(
                AnimationGroup(
                    FadeIn(subtitle_voice, run_time=0.5),  # å­—å¹•å¿«é€Ÿæ·¡å…¥
                    FadeIn(title, shift=UP * 0.5, run_time=1.5),  # æ ‡é¢˜åŠ¨ç”»
                    lag_ratio=0.0  # åŒæ­¥è¿›è¡Œï¼Œä¸å»¶è¿Ÿ
                ),
                run_time=1.5  # åŠ¨ç”»æ€»ä½“æ§åˆ¶åœ¨1.5ç§’ä»¥å†…
            )

            # å¼€å§‹å‰¯æ ‡é¢˜çš„åŠ¨ç”» (åœ¨å£°éŸ³ç»§ç»­æ’­æ”¾æ—¶)
            self.play(
                AnimationGroup(
                    FadeIn(subtitle_part1, shift=RIGHT * 0.2),
                    Write(subtitle_part2),
                    FadeIn(subtitle_part3, shift=LEFT * 0.2),
                    lag_ratio=0.2  # å¾®å°å»¶è¿Ÿè®©åŠ¨ç”»æ›´åŠ æµç•…
                ),
                run_time=2.0
            )

            # ä¸Šè¿°åŠ¨ç”»ç´¯è®¡1.5 + 2.0 = 3.5ç§’ï¼Œæ­¤æ—¶è‹¥å£°éŸ³æ²¡æ’­æ”¾å®Œï¼Œç»§ç»­ç­‰å¾…å£°éŸ³å®Œæˆ
            elapsed_time = 3.5
            remaining_time = tracker.duration - elapsed_time - 1.0  # å‡å»åç»­å­—å¹•æ·¡å‡ºæ—¶é—´
            if remaining_time > 0:
                self.wait(remaining_time)

            # æœ€åå­—å¹•æ·¡å‡º
            self.play(FadeOut(subtitle_voice), run_time=1.0)

        self.wait(1)


# --- Main execution block ---
if __name__ == "__main__":
    config.pixel_height = 1080
    config.pixel_width = 1920
    config.frame_rate = 30
    config.output_file = "CombinedScene"
    config.media_dir = r"#(output_path)"
    config.disable_caching = True
    scene = CombinedScene()
    scene.render()
    print("Scene rendering finished.")
```
````
